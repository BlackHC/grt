
if (APPLE) # Assume homebrew
    # Check that SWIG is installed
    find_program(SWIG_EXECUTABLE swig)
    if (NOT SWIG_EXECUTABLE)
        message(FATAL_ERROR "SWIG not found. Please install it using homebrew: brew install swig")
    endif()
endif()
find_package(SWIG 3 REQUIRED)
INCLUDE(${SWIG_USE_FILE})

# Find Python
find_package(PythonLibs 3 REQUIRED)
include_directories(${PYTHON_INCLUDE_DIRS})
message(STATUS "Found python: ${PYTHON_INCLUDE_DIRS} ${PYTHON_LIBRARIES}")

find_package(PythonInterp 3 REQUIRED)

# Find Numpy
find_package(Numpy REQUIRED)
if (NOT IS_DIRECTORY ${NUMPY_INCLUDE_DIR})
    message(FATAL_ERROR "Cannot find Numpy")
endif()
include_directories(${NUMPY_INCLUDE_DIR})

include_directories(${GRT_SRC_DIR})

add_compile_options(-Wno-deprecated)

set_property(SOURCE GRT.i PROPERTY CPLUSPLUS ON)
set_property(SOURCE GRT.i PROPERTY SWIG_FLAGS -Wall -verbose -py3)
swig_add_library(GRT LANGUAGE python SOURCES GRT.i)

swig_link_libraries(GRT ${PYTHON_LIBRARIES} ${GRT_LIB_NAME} )

# Copy python examples files
file(GLOB PYTHON_EXAMPLES
        "${CMAKE_CURRENT_SOURCE_DIR}/*.py"
        )
file(COPY ${PYTHON_EXAMPLES} DESTINATION ".")
